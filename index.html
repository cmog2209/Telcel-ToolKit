<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telcel - Toolkit | Home</title>
    <link rel="icon" type="image/svg+xml" href='data:image/svg+xml;utf8,
  <svg xmlns="http://www.w3.org/2000/svg" width="128" height="128">
    <rect x="12"  y="92" width="20" height="24" rx="6" ry="6" fill="%230047BB"/>
    <rect x="44"  y="76" width="20" height="40" rx="6" ry="6" fill="%230047BB"/>
    <rect x="76"  y="48" width="20" height="68" rx="6" ry="6" fill="%230047BB"/>
    <rect x="108" y="20" width="20" height="96" rx="6" ry="6" fill="%230047BB" />
  </svg>'>
    <link rel="preload" href="css/style.css" as="style">
    <link rel="stylesheet" href="css/style.css" media="print" onload="this.media='all'">
</head>

<body>

    <aside id="sidebar">
        <h3>Menu</h3>
        <ul>
            <li><a href="#" data-page="home">üè† Home</a></li>
            <li><a href="pages/sku.html" data-page="sku">üì¶ SKU</a></li>
            <li><a href="pages/Contactos.html">üìû Contactos</a></li>
            <li><a href="pages/Manuales.html">üìö Manuales</a></li>
        </ul>
    </aside>

    <div id="content-wrapper">
        <header>
            <div id="header-title">Telcel - Toolkit</div>
        </header>

        <main id="app-content">

            <div id="page-home" class="page-content-wrapper">
                <div class="sections-container">
                    <div class="section">
                        <h3>Generar ICCID</h3>
                        <input type="text" id="iccid18" placeholder="ICCID 18 DIGITOS" maxlength="18">
                        <button id="procesar" disabled>PROCESAR</button><br>
                        <input type="text" id="iccid19" placeholder="ICCID 19 DIGITOS" readonly>
                        <button id="copiar" disabled>COPIAR</button>
                        <span id="mensaje">¬°Copiado al portapapeles!</span>
                    </div>

                    <div class="section">
                        <h3>Generar Identificaci√≥n</h3>
                        <input type="text" id="identificacion" placeholder="IDMEX + 10 d√≠gitos" readonly>
                        <button id="generarID">GENERAR IDENTIFICACI√ìN</button>
                        <button id="copiarID" disabled>COPIAR</button>
                        <span id="mensajeID">¬°Identificaci√≥n copiada!</span>
                    </div>

                    <div class="section">
                        <h3>N√∫mero de contactos</h3>
                        <input type="text" id="telefono1" placeholder="Tel√©fono 1" readonly>
                        <button id="copiarTel1" disabled>COPIAR</button>
                        <span id="msgTel1">¬°Tel√©fono 1 copiado!</span><br>

                        <input type="text" id="telefono2" placeholder="Tel√©fono 2" readonly>
                        <button id="copiarTel2" disabled>COPIAR</button>
                        <span id="msgTel2">¬°Tel√©fono 2 copiado!</span><br>

                        <button id="generarTels">GENERAR N√öMEROS</button>
                    </div>

                    <div class="section">
                        <h3>Identificador de LADA M√©xico R9 - DEUR</h3>
                        <input type="text" id="phone" placeholder="Ingresa el n√∫mero (10 d√≠gitos)" maxlength="10"
                            inputmode="numeric" pattern="\d{10}" title="Debe contener exactamente 10 d√≠gitos">
                        <button onclick="buscarLada()">Buscar</button>
                        <p id="resultado"></p>
                    </div>

                    <div class="section">
                        <h3>Pr√≥ximas Fechas de Corte</h3>
                        <label for="fecha">Selecciona la fecha de activaci√≥n:</label>
                        <input type="date" id="fecha" onkeydown="return false;" maxlength="8">
                        <br>
                        <label>Proximas 10 fechas de corte:</label>
                        <div class="result">
                            <div class="ciclos-container">
                                <div class="ciclo">
                                    <h4>Ciclo 82:</h4>
                                    <ul id="ciclo82"></ul>
                                </div>
                                <div class="ciclo">
                                    <h4>Ciclo 83:</h4>
                                    <ul id="ciclo83"></ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </main>

        <footer>
            Creado por CMOG | by EpamNeoris | ¬© <span id="year"></span> Todos los derechos reservados | **V5.1.1**
        </footer>
    </div>

    <script>
        // Base de datos de ladas
        const ladas = {
            "55": "Ciudad de M√©xico y √°rea metropolitana",
            "56": "Ciudad de M√©xico y √°rea metropolitana (Nueva)",
            "33": "Guadalajara, Jalisco",
            "81": "Monterrey, Nuevo Le√≥n",
            "477": "Le√≥n, Guanajuato",
            "664": "Tijuana, Baja California",
            "656": "Ciudad Ju√°rez, Chihuahua",
            "998": "Canc√∫n, Quintana Roo",
            "222": "Puebla, Puebla",
            "442": "Quer√©taro, Qro.",
            "444": "San Luis Potos√≠, SLP",
            "229": "Veracruz, Veracruz",
            "871": "Torre√≥n, Coahuila/Durango (La Laguna)",
            "722": "Toluca, Estado de M√©xico",
            "999": "M√©rida, Yucat√°n",
            "662": "Hermosillo, Sonora",
            "667": "Culiac√°n, Sinaloa",
            "449": "Aguascalientes, Ags.",
            "981": "Campeche, Campeche",
            "961": "Tuxtla Guti√©rrez, Chiapas",
            "614": "Chihuahua, Chihuahua",
            "844": "Saltillo, Coahuila",
            "312": "Colima, Colima",
            "618": "Durango, Durango",
            "473": "Guanajuato, Gto.",
            "747": "Chilpancingo, Guerrero",
            "771": "Pachuca, Hidalgo",
            "443": "Morelia, Michoac√°n",
            "777": "Cuernavaca, Morelos",
            "311": "Tepic, Nayarit",
            "951": "Oaxaca, Oaxaca",
            "983": "Chetumal, Quintana Roo",
            "993": "Villahermosa, Tabasco",
            "834": "Ciudad Victoria, Tamaulipas",
            "246": "Tlaxcala, Tlaxcala",
            "228": "Xalapa, Veracruz",
            "492": "Zacatecas, Zacatecas",
            "612": "La Paz, Baja California Sur",
            "686": "Mexicali, Baja California",
            "663": "Ensenada, Baja California",
            "461": "Celaya, Guanajuato",
            "462": "Irapuato, Guanajuato",
            "899": "Reynosa, Tamaulipas",
            "672": "Navolato, Sinaloa",
            "493": "Jerez, Zacatecas",
            "494": "Fresnillo, Zacatecas",
            "496": "Sombrerete, Zacatecas"
        };

        /**
         * Funci√≥n para buscar el identificador de LADA.
         */
        function buscarLada() {
            const phoneInput = document.getElementById('phone');
            const resultadoDiv = document.getElementById('resultado');
            const telefono = phoneInput.value;

            if (telefono.length !== 10) {
                resultadoDiv.textContent = "Error: El n√∫mero debe contener exactamente 10 d√≠gitos.";
                resultadoDiv.style.color = "red";
                return;
            }

            const lada2 = telefono.substring(0, 2);
            const lada3 = telefono.substring(0, 3);
            let ciudad = "LADA no encontrada. Lada: " + lada3 + " / " + lada2;
            let color = "red";

            if (ladas[lada3]) {
                ciudad = `LADA: ${lada3} - ${ladas[lada3]}`;
                color = "green";
            } else if (ladas[lada2]) {
                ciudad = `LADA: ${lada2} - ${ladas[lada2]}`;
                color = "green";
            }

            resultadoDiv.textContent = ciudad;
            resultadoDiv.style.color = color;
        }

        // Funcionalidad ICCID
        const input = document.getElementById("iccid18");
        const output = document.getElementById("iccid19");
        const procesarBtn = document.getElementById("procesar");
        const copiarBtn = document.getElementById("copiar");
        const mensaje = document.getElementById("mensaje");

        // L√≥gica para validar ICCID y procesar
        input.addEventListener("input", function () {
            this.value = this.value.replace(/\D/g, '');
            procesarBtn.disabled = this.value.length !== 18;
        });

        procesarBtn.onclick = function () {
            const num = input.value;
            const reversed = num.split('').reverse();
            let total = 0;
            for (let i = 0; i < reversed.length; i++) {
                let digit = parseInt(reversed[i]);
                total += i % 2 ? digit : 2 * digit - (digit > 4 ? 9 : 0);
            }
            const verificationDigit = (total * 9) % 10;
            output.value = num + verificationDigit;
            copiarBtn.disabled = false;
            mensaje.style.visibility = "hidden";
        };

        copiarBtn.onclick = function () {
            navigator.clipboard.writeText(output.value)
                .then(() => {
                    mensaje.style.visibility = "visible";
                    setTimeout(() => mensaje.style.visibility = "hidden", 2000);
                });
        };

        // Funcionalidad Identificaci√≥n (IDMEX)
        const identificacionInput = document.getElementById("identificacion");
        const generarIDBtn = document.getElementById("generarID");
        const copiarIDBtn = document.getElementById("copiarID");
        const mensajeID = document.getElementById("mensajeID");

        // Generador de 10 d√≠gitos aleatorios
        function generarDigitosAleatorios() {
            let result = '';
            for (let i = 0; i < 10; i++) {
                result += Math.floor(Math.random() * 10);
            }
            return result;
        }

        generarIDBtn.onclick = function () {
            identificacionInput.value = "IDMEX" + generarDigitosAleatorios();
            copiarIDBtn.disabled = false;
            mensajeID.style.visibility = "hidden";
        };

        copiarIDBtn.onclick = function () {
            navigator.clipboard.writeText(identificacionInput.value)
                .then(() => {
                    mensajeID.style.visibility = "visible";
                    setTimeout(() => mensajeID.style.visibility = "hidden", 2000);
                });
        };

        // N√∫meros de contacto
        const tel1Input = document.getElementById("telefono1");
        const tel2Input = document.getElementById("telefono2");
        const generarTelsBtn = document.getElementById("generarTels");
        const copiarTel1Btn = document.getElementById("copiarTel1");
        const copiarTel2Btn = document.getElementById("copiarTel2");
        const msgTel1 = document.getElementById("msgTel1");
        const msgTel2 = document.getElementById("msgTel2");

        function generarTelefono() {
            let telefono = "55";
            while (telefono.length < 10) {
                telefono += Math.floor(Math.random() * 10);
            }
            return telefono;
        }

        generarTelsBtn.onclick = function () {
            let tel1 = generarTelefono();
            let tel2 = generarTelefono();

            while (tel2 === tel1) {
                tel2 = generarTelefono();
            }

            tel1Input.value = tel1;
            tel2Input.value = tel2;

            copiarTel1Btn.disabled = false;
            copiarTel2Btn.disabled = false;
            msgTel1.style.visibility = "hidden";
            msgTel2.style.visibility = "hidden";
        };

        copiarTel1Btn.onclick = function () {
            navigator.clipboard.writeText(tel1Input.value)
                .then(() => {
                    msgTel1.style.visibility = "visible";
                    setTimeout(() => msgTel1.style.visibility = "hidden", 2000);
                });
        };

        copiarTel2Btn.onclick = function () {
            navigator.clipboard.writeText(tel2Input.value)
                .then(() => {
                    msgTel2.style.visibility = "visible";
                    setTimeout(() => msgTel2.style.visibility = "hidden", 2000);
                });
        };


        // LADA Input Filter
        const phoneInput = document.getElementById('phone');
        phoneInput.addEventListener('input', function () {
            this.value = this.value.replace(/\D/g, '');
            if (this.value.length > 10) {
                this.value = this.value.slice(0, 10);
            }
        });


        // Funcionalidad Ciclos de Corte
        const fechaInput = document.getElementById('fecha');

        function calcularFechas() {
            const fechaSeleccionada = new Date(fechaInput.value + 'T00:00:00');
            if (isNaN(fechaSeleccionada)) {
                document.getElementById('ciclo82').innerHTML = '<li>Selecciona una fecha v√°lida.</li>';
                document.getElementById('ciclo83').innerHTML = '<li>Selecciona una fecha v√°lida.</li>';
                return;
            }

            // Definir fechas base e intervalos para los dos ciclos (ejemplo de la fuente)
            const base82 = new Date('2024-03-08T00:00:00'); // Fecha de inicio de ejemplo para Ciclo 82
            const intervalo82 = 2; // D√≠as de intervalo de ejemplo
            const base83 = new Date('2024-03-05T00:00:00'); // Fecha de inicio de ejemplo para Ciclo 83
            const intervalo83 = 5; // D√≠as de intervalo de ejemplo

            mostrarFechas('ciclo82', fechaSeleccionada, base82, intervalo82, 10);
            mostrarFechas('ciclo83', fechaSeleccionada, base83, intervalo83, 10);
        }

        function mostrarFechas(elementId, fechaSeleccionada, fechaBase, intervalo, cantidad) {
            const lista = document.getElementById(elementId);
            lista.innerHTML = '';
            let fecha = new Date(fechaBase);

            // Avanzar hasta encontrar la primera fecha de corte IGUAL o POSTERIOR
            while (fecha.getTime() < fechaSeleccionada.getTime()) {
                fecha.setDate(fecha.getDate() + intervalo);
            }

            let fechasGeneradas = 0;
            while (fechasGeneradas < cantidad) {
                lista.innerHTML += `<li>${fecha.toLocaleDateString('es-MX')}</li>`;
                fecha.setDate(fecha.getDate() + intervalo);
                fechasGeneradas++;
            }
        }

        // Inicializar y recalcular en el cambio de fecha
        const hoy = new Date();
        if (!fechaInput.value) {
            fechaInput.value = hoy.toISOString().split('T')[0];
        }
        calcularFechas();
        fechaInput.addEventListener('change', calcularFechas);


        // Footer Year
        document.getElementById("year").textContent = new Date().getFullYear();

        // Hacemos que la funci√≥n buscarLada est√© disponible globalmente (es llamada desde el bot√≥n)
        window.buscarLada = buscarLada;

    </script>
</body>

</html>